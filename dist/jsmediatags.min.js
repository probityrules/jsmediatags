var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(c,r,q){c!=Array.prototype&&c!=Object.prototype&&(c[r]=q.value)};$jscomp.getGlobal=function(c){return"undefined"!=typeof window&&window===c?c:"undefined"!=typeof global&&null!=global?global:c};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(c,r,q,n){if(r){q=$jscomp.global;c=c.split(".");for(n=0;n<c.length-1;n++){var u=c[n];u in q||(q[u]={});q=q[u]}c=c[c.length-1];n=q[c];r=r(n);r!=n&&null!=r&&$jscomp.defineProperty(q,c,{configurable:!0,writable:!0,value:r})}};$jscomp.polyfill("Object.setPrototypeOf",function(c){return c?c:"object"!=typeof"".__proto__?null:function(c,q){c.__proto__=q;if(c.__proto__!==q)throw new TypeError(c+" is not extensible");return c}},"es6","es5");
$jscomp.objectCreate=$jscomp.ASSUME_ES5||"function"==typeof Object.create?Object.create:function(c){var r=function(){};r.prototype=c;return new r};$jscomp.construct="undefined"!=typeof Reflect&&Reflect.construct||function(c,r,q){void 0===q&&(q=c);q=$jscomp.objectCreate(q.prototype||Object.prototype);return Function.prototype.apply.call(c,q,r)||q};$jscomp.polyfill("Reflect.construct",function(c){return c||$jscomp.construct},"es6","es3");
(function(c){"object"===typeof exports&&"undefined"!==typeof module?module.exports=c():"function"===typeof define&&define.amd?define([],c):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).jsmediatags=c()})(function(){return function(){function c(r,q,n){function u(f,b){if(!q[f]){if(!r[f]){var k="function"==typeof require&&require;if(!b&&k)return k(f,!0);if(v)return v(f,!0);b=Error("Cannot find module '"+f+"'");throw b.code="MODULE_NOT_FOUND",
b;}b=q[f]={exports:{}};r[f][0].call(b.exports,function(b){return u(r[f][1][b]||b)},b,b.exports,c,r,q,n)}return q[f].exports}for(var v="function"==typeof require&&require,p=0;p<n.length;p++)u(n[p]);return u}return c}()({1:[function(c,r,q){},{}],2:[function(c,r,q){r.exports=XMLHttpRequest},{}],3:[function(c,r,q){function n(d){"@babel/helpers - typeof";n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===
Symbol&&a!==Symbol.prototype?"symbol":typeof a};return n(d)}function u(d,a){for(var e=0;e<a.length;e++){var m=a[e];m.enumerable=m.enumerable||!1;m.configurable=!0;"value"in m&&(m.writable=!0);Object.defineProperty(d,m.key,m)}}function v(d,a,e){a&&u(d.prototype,a);e&&u(d,e);return d}function p(d,a){if("function"!==typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(a&&a.prototype,{constructor:{value:d,writable:!0,configurable:!0}});
a&&f(d,a)}function f(d,a){f=Object.setPrototypeOf||function(a,m){a.__proto__=m;return a};return f(d,a)}function b(d){var a=l();return function(){var e=t(d);if(a){var m=t(this).constructor;e=Reflect.construct(e,arguments,m)}else e=e.apply(this,arguments);e=!e||"object"!==n(e)&&"function"!==typeof e?k(this):e;return e}}function k(d){if(void 0===d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d}function l(){if("undefined"===typeof Reflect||!Reflect.construct||
Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(d){return!1}}function t(d){t=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)};return t(d)}function h(d,a,e){a in d?Object.defineProperty(d,a,{value:e,enumerable:!0,configurable:!0,writable:!0}):d[a]=e;return d}c=function(d){function a(m){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");
var g=e.call(this);h(k(g),"_array",void 0);h(k(g),"_size",void 0);g._array=m;g._size=m.length;g._isInitialized=!0;return g}p(a,d);var e=b(a);v(a,[{key:"init",value:function(a){setTimeout(a.onSuccess,0)}},{key:"loadRange",value:function(a,g){setTimeout(g.onSuccess,0)}},{key:"getByteAt",value:function(a){if(a>=this._array.length)throw Error("Offset "+a+" hasn't been loaded yet.");return this._array[a]}}],[{key:"canReadFile",value:function(a){return Array.isArray(a)||"function"===typeof Buffer&&Buffer.isBuffer(a)}}]);
return a}(c("./MediaFileReader"));r.exports=c},{"./MediaFileReader":11}],4:[function(c,r,q){function n(a){"@babel/helpers - typeof";n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};return n(a)}function u(a,e){for(var m=0;m<e.length;m++){var g=e[m];g.enumerable=g.enumerable||!1;g.configurable=!0;"value"in g&&(g.writable=!0);Object.defineProperty(a,
g.key,g)}}function v(a,e,m){e&&u(a.prototype,e);m&&u(a,m);return a}function p(a,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,writable:!0,configurable:!0}});e&&f(a,e)}function f(a,e){f=Object.setPrototypeOf||function(a,g){a.__proto__=g;return a};return f(a,e)}function b(a){var e=l();return function(){var m=t(a);if(e){var g=t(this).constructor;m=Reflect.construct(m,arguments,
g)}else m=m.apply(this,arguments);m=!m||"object"!==n(m)&&"function"!==typeof m?k(this):m;return m}}function k(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function l(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}function t(a){t=Object.setPrototypeOf?
Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)};return t(a)}function h(a,e,m){e in a?Object.defineProperty(a,e,{value:m,enumerable:!0,configurable:!0,writable:!0}):a[e]=m;return a}var d=c("./ChunkedFileData");c=function(a){function e(a){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");var g=m.call(this);h(k(g),"_blob",void 0);h(k(g),"_fileData",void 0);g._blob=a;g._fileData=new d;return g}p(e,a);var m=b(e);v(e,[{key:"_init",value:function(a){this._size=
this._blob.size;setTimeout(a.onSuccess,1)}},{key:"loadRange",value:function(a,e){var g=this,m=(this._blob.slice||this._blob.mozSlice||this._blob.webkitSlice).call(this._blob,a[0],a[1]+1),d=new FileReader;d.onloadend=function(m){m=new Uint8Array(d.result);g._fileData.addData(a[0],m);e.onSuccess()};d.onerror=d.onabort=function(a){if(e.onError)e.onError({type:"blob",info:d.error})};d.readAsArrayBuffer(m)}},{key:"getByteAt",value:function(a){return this._fileData.getByteAt(a)}}],[{key:"canReadFile",value:function(a){return"undefined"!==
typeof Blob&&a instanceof Blob||"undefined"!==typeof File&&a instanceof File}}]);return e}(c("./MediaFileReader"));r.exports=c},{"./ChunkedFileData":5,"./MediaFileReader":11}],5:[function(c,r,q){function n(c,p){for(var f=0;f<p.length;f++){var b=p[f];b.enumerable=b.enumerable||!1;b.configurable=!0;"value"in b&&(b.writable=!0);Object.defineProperty(c,b.key,b)}}function u(c,p,f){p&&n(c.prototype,p);f&&n(c,f);return c}c=function(){function c(){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");
"_fileData"in this?Object.defineProperty(this,"_fileData",{value:void 0,enumerable:!0,configurable:!0,writable:!0}):this._fileData=void 0;this._fileData=[]}u(c,[{key:"addData",value:function(c,f){var b=c+f.length-1,k=this._getChunkRange(c,b);if(-1===k.startIx)this._fileData.splice(k.insertIx||0,0,{offset:c,data:f});else{var l=this._fileData[k.startIx],p=this._fileData[k.endIx];b=b<p.offset+p.data.length-1;var h={offset:Math.min(c,l.offset),data:f};c>l.offset&&(c=this._sliceData(l.data,0,c-l.offset),
h.data=this._concatData(c,f));b&&(c=this._sliceData(h.data,0,p.offset-h.offset),h.data=this._concatData(c,p.data));this._fileData.splice(k.startIx,k.endIx-k.startIx+1,h)}}},{key:"_concatData",value:function(c,f){if("undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(c)){var b=new c.constructor(c.length+f.length);b.set(c,0);b.set(f,c.length);return b}return c.concat(f)}},{key:"_sliceData",value:function(c,f,b){return c.slice?c.slice(f,b):c.subarray(f,b)}},{key:"_getChunkRange",
value:function(c,f){for(var b,k,l=-1,t=-1,h=0,d=0;d<this._fileData.length;d++,h=d){k=this._fileData[d].offset;b=k+this._fileData[d].data.length;if(f<k-1)break;if(c<=b+1&&f>=k-1){l=d;break}}if(-1===l)return{startIx:-1,endIx:-1,insertIx:h};for(d=l;d<this._fileData.length&&!(k=this._fileData[d].offset,b=k+this._fileData[d].data.length,f>=k-1&&(t=d),f<=b+1);d++);-1===t&&(t=l);return{startIx:l,endIx:t}}},{key:"hasDataRange",value:function(c,f){for(var b=0;b<this._fileData.length;b++){var k=this._fileData[b];
if(f<k.offset)break;if(c>=k.offset&&f<k.offset+k.data.length)return!0}return!1}},{key:"getByteAt",value:function(c){for(var f,b=0;b<this._fileData.length;b++){var k=this._fileData[b].offset,l=k+this._fileData[b].data.length-1;if(c>=k&&c<=l){f=this._fileData[b];break}}if(f)return f.data[c-f.offset];throw Error("Offset "+c+" hasn't been loaded yet.");}}],[{key:"NOT_FOUND",get:function(){return-1}}]);return c}();r.exports=c},{}],6:[function(c,r,q){function n(a){"@babel/helpers - typeof";n="function"===
typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};return n(a)}function u(a,g){for(var e=0;e<g.length;e++){var m=g[e];m.enumerable=m.enumerable||!1;m.configurable=!0;"value"in m&&(m.writable=!0);Object.defineProperty(a,m.key,m)}}function v(a,e,d){e&&u(a.prototype,e);d&&u(a,d);return a}function p(a,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");
a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,writable:!0,configurable:!0}});e&&f(a,e)}function f(a,e){f=Object.setPrototypeOf||function(a,e){a.__proto__=e;return a};return f(a,e)}function b(a){var e=l();return function(){var g=t(a);if(e){var d=t(this).constructor;g=Reflect.construct(g,arguments,d)}else g=g.apply(this,arguments);g=!g||"object"!==n(g)&&"function"!==typeof g?k(this):g;return g}}function k(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return a}function l(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(m){return!1}}function t(a){t=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)};return t(a)}function h(a,e,d){e in a?Object.defineProperty(a,e,{value:d,enumerable:!0,configurable:!0,writable:!0}):a[e]=d;return a}
var d=[4,132],a=[6,134],e="Other;32x32 pixels 'file icon' (PNG only);Other file icon;Cover (front);Cover (back);Leaflet page;Media (e.g. label side of CD);Lead artist/lead performer/soloist;Artist/performer;Conductor;Band/Orchestra;Composer;Lyricist/text writer;Recording Location;During recording;During performance;Movie/video screen capture;A bright coloured fish;Illustration;Band/artist logotype;Publisher/Studio logotype".split(";");c=function(m){function g(){if(!(this instanceof g))throw new TypeError("Cannot call a class as a function");
var a=arguments.length;for(var e=Array(a),d=0;d<a;d++)e[d]=arguments[d];a=w.call.apply(w,[this].concat(e));h(k(a),"_commentOffset",void 0);h(k(a),"_pictureOffset",void 0);return a}p(g,m);var w=b(g);v(g,[{key:"_loadData",value:function(a,e){var g=this;a.loadRange([4,7],{onSuccess:function(){g._loadBlock(a,4,e)}})}},{key:"_loadBlock",value:function(e,g,m){var h=this,b=e.getByteAt(g),w=e.getInteger24At(g+1,!0);if(-1!==d.indexOf(b)){var f=g+4;e.loadRange([f,f+w],{onSuccess:function(){h._commentOffset=
f;h._nextBlock(e,g,b,w,m)}})}else-1!==a.indexOf(b)?(f=g+4,e.loadRange([f,f+w],{onSuccess:function(){h._pictureOffset=f;h._nextBlock(e,g,b,w,m)}})):h._nextBlock(e,g,b,w,m)}},{key:"_nextBlock",value:function(a,e,g,d,m){var h=this;if(127<g)if(h._commentOffset)m.onSuccess();else m.onError({type:"loadData",info:"Comment block could not be found."});else a.loadRange([e+4+d,e+4+4+d],{onSuccess:function(){h._loadBlock(a,e+4+d,m)}})}},{key:"_parseData",value:function(a,g){var d=a.getLongAt(this._commentOffset,
!1)+(this._commentOffset+4);g=a.getLongAt(d,!1);d+=4;for(var m,h,b,w,f,c,x=0;x<g;x++){var k=a.getLongAt(d,!1),l=a.getStringWithCharsetAt(d+4,k,"utf-8").toString(),y=l.indexOf("=");l=[l.slice(0,y),l.slice(y+1)];switch(l[0].toUpperCase()){case "TITLE":m=l[1];break;case "ARTIST":h=l[1];break;case "ALBUM":b=l[1];break;case "TRACKNUMBER":w=l[1];break;case "GENRE":f=l[1]}d+=4+k}this._pictureOffset&&(c=a.getLongAt(this._pictureOffset,!0),g=this._pictureOffset+4,d=a.getLongAt(g,!0),x=g+4,g=a.getStringAt(x,
d),d=x+d,x=a.getLongAt(d,!0),k=d+4,d=a.getStringWithCharsetAt(k,x,"utf-8").toString(),x=k+x+16,k=a.getLongAt(x,!0),a=a.getBytesAt(x+4,k,!0),c={format:g,type:e[c],description:d,data:a});return{type:"FLAC",version:"1",tags:{title:m,artist:h,album:b,track:w,genre:f,picture:c}}}}],[{key:"getTagIdentifierByteRange",value:function(){return{offset:0,length:4}}},{key:"canReadTagFormat",value:function(a){return"fLaC"===String.fromCharCode.apply(String,a.slice(0,4))}}]);return g}(c("./MediaTagReader"));r.exports=
c},{"./MediaTagReader":12}],7:[function(c,r,q){function n(h){"@babel/helpers - typeof";n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(d){return typeof d}:function(d){return d&&"function"===typeof Symbol&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d};return n(h)}function u(h,d){for(var a=0;a<d.length;a++){var e=d[a];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(h,e.key,e)}}function v(h,d,a){d&&u(h.prototype,
d);a&&u(h,a);return h}function p(h,d){if("function"!==typeof d&&null!==d)throw new TypeError("Super expression must either be null or a function");h.prototype=Object.create(d&&d.prototype,{constructor:{value:h,writable:!0,configurable:!0}});d&&f(h,d)}function f(h,d){f=Object.setPrototypeOf||function(a,e){a.__proto__=e;return a};return f(h,d)}function b(h){var d=k();return function(){var a=l(h);if(d){var e=l(this).constructor;a=Reflect.construct(a,arguments,e)}else a=a.apply(this,arguments);if(!a||
"object"!==n(a)&&"function"!==typeof a){if(void 0===this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");a=this}return a}}function k(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(h){return!1}}function l(h){l=Object.setPrototypeOf?Object.getPrototypeOf:function(d){return d.__proto__||Object.getPrototypeOf(d)};
return l(h)}q=c("./MediaTagReader");c("./MediaFileReader");c=function(h){function d(){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");return a.apply(this,arguments)}p(d,h);var a=b(d);v(d,[{key:"_loadData",value:function(a,d){var e=a.getSize();a.loadRange([e-128,e-1],d)}},{key:"_parseData",value:function(a,d){var e=a.getSize()-128,h=a.getStringWithCharsetAt(e+3,30).toString(),m=a.getStringWithCharsetAt(e+33,30).toString(),b=a.getStringWithCharsetAt(e+63,30).toString(),
f=a.getStringWithCharsetAt(e+93,4).toString();var c=a.getByteAt(e+97+28);d=a.getByteAt(e+97+29);if(0==c&&0!=d){var k="1.1";c=a.getStringWithCharsetAt(e+97,28).toString()}else k="1.0",c=a.getStringWithCharsetAt(e+97,30).toString(),d=0;a=a.getByteAt(e+97+30);a={type:"ID3",version:k,tags:{title:h,artist:m,album:b,year:f,comment:c,genre:255>a?t[a]:""}};d&&(a.tags.track=d);return a}}],[{key:"getTagIdentifierByteRange",value:function(){return{offset:-128,length:128}}},{key:"canReadTagFormat",value:function(a){return"TAG"===
String.fromCharCode.apply(String,a.slice(0,3))}}]);return d}(q);var t="Blues;Classic Rock;Country;Dance;Disco;Funk;Grunge;Hip-Hop;Jazz;Metal;New Age;Oldies;Other;Pop;R&B;Rap;Reggae;Rock;Techno;Industrial;Alternative;Ska;Death Metal;Pranks;Soundtrack;Euro-Techno;Ambient;Trip-Hop;Vocal;Jazz+Funk;Fusion;Trance;Classical;Instrumental;Acid;House;Game;Sound Clip;Gospel;Noise;AlternRock;Bass;Soul;Punk;Space;Meditative;Instrumental Pop;Instrumental Rock;Ethnic;Gothic;Darkwave;Techno-Industrial;Electronic;Pop-Folk;Eurodance;Dream;Southern Rock;Comedy;Cult;Gangsta;Top 40;Christian Rap;Pop/Funk;Jungle;Native American;Cabaret;New Wave;Psychadelic;Rave;Showtunes;Trailer;Lo-Fi;Tribal;Acid Punk;Acid Jazz;Polka;Retro;Musical;Rock & Roll;Hard Rock;Folk;Folk-Rock;National Folk;Swing;Fast Fusion;Bebob;Latin;Revival;Celtic;Bluegrass;Avantgarde;Gothic Rock;Progressive Rock;Psychedelic Rock;Symphonic Rock;Slow Rock;Big Band;Chorus;Easy Listening;Acoustic;Humour;Speech;Chanson;Opera;Chamber Music;Sonata;Symphony;Booty Bass;Primus;Porn Groove;Satire;Slow Jam;Club;Tango;Samba;Folklore;Ballad;Power Ballad;Rhythmic Soul;Freestyle;Duet;Punk Rock;Drum Solo;Acapella;Euro-House;Dance Hall".split(";");
r.exports=c},{"./MediaFileReader":11,"./MediaTagReader":12}],8:[function(c,r,q){function n(h,d){for(var a=0;a<d.length;a++){var e=d[a];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(h,e.key,e)}}function u(h,d,a){d&&n(h.prototype,d);a&&n(h,a);return h}function v(h){switch(h){case 0:h="iso-8859-1";break;case 1:h="utf-16";break;case 2:h="utf-16be";break;case 3:h="utf-8";break;default:h="iso-8859-1"}return h}function p(h,d,a,e){var m=a.getStringWithCharsetAt(h+
1,d-1,e);h=a.getStringWithCharsetAt(h+1+m.bytesReadCount,d-1-m.bytesReadCount,e);return{user_description:m.toString(),data:h.toString()}}c("./MediaFileReader");var f=c("./StringUtils"),b=c("./ArrayFileReader"),k={BUF:"Recommended buffer size",CNT:"Play counter",COM:"Comments",CRA:"Audio encryption",CRM:"Encrypted meta frame",ETC:"Event timing codes",EQU:"Equalization",GEO:"General encapsulated object",IPL:"Involved people list",LNK:"Linked information",MCI:"Music CD Identifier",MLL:"MPEG location lookup table",
PIC:"Attached picture",POP:"Popularimeter",REV:"Reverb",RVA:"Relative volume adjustment",SLT:"Synchronized lyric/text",STC:"Synced tempo codes",TAL:"Album/Movie/Show title",TBP:"BPM (Beats Per Minute)",TCM:"Composer",TCO:"Content type",TCR:"Copyright message",TDA:"Date",TDY:"Playlist delay",TEN:"Encoded by",TFT:"File type",TIM:"Time",TKE:"Initial key",TLA:"Language(s)",TLE:"Length",TMT:"Media type",TOA:"Original artist(s)/performer(s)",TOF:"Original filename",TOL:"Original Lyricist(s)/text writer(s)",
TOR:"Original release year",TOT:"Original album/Movie/Show title",TP1:"Lead artist(s)/Lead performer(s)/Soloist(s)/Performing group",TP2:"Band/Orchestra/Accompaniment",TP3:"Conductor/Performer refinement",TP4:"Interpreted, remixed, or otherwise modified by",TPA:"Part of a set",TPB:"Publisher",TRC:"ISRC (International Standard Recording Code)",TRD:"Recording dates",TRK:"Track number/Position in set",TSI:"Size",TSS:"Software/hardware and settings used for encoding",TT1:"Content group description",TT2:"Title/Songname/Content description",
TT3:"Subtitle/Description refinement",TXT:"Lyricist/text writer",TXX:"User defined text information frame",TYE:"Year",UFI:"Unique file identifier",ULT:"Unsychronized lyric/text transcription",WAF:"Official audio file webpage",WAR:"Official artist/performer webpage",WAS:"Official audio source webpage",WCM:"Commercial information",WCP:"Copyright/Legal information",WPB:"Publishers official webpage",WXX:"User defined URL link frame",AENC:"Audio encryption",APIC:"Attached picture",ASPI:"Audio seek point index",
CHAP:"Chapter",CTOC:"Table of contents",COMM:"Comments",COMR:"Commercial frame",ENCR:"Encryption method registration",EQU2:"Equalisation (2)",EQUA:"Equalization",ETCO:"Event timing codes",GEOB:"General encapsulated object",GRID:"Group identification registration",IPLS:"Involved people list",LINK:"Linked information",MCDI:"Music CD identifier",MLLT:"MPEG location lookup table",OWNE:"Ownership frame",PRIV:"Private frame",PCNT:"Play counter",POPM:"Popularimeter",POSS:"Position synchronisation frame",
RBUF:"Recommended buffer size",RVA2:"Relative volume adjustment (2)",RVAD:"Relative volume adjustment",RVRB:"Reverb",SEEK:"Seek frame",SYLT:"Synchronized lyric/text",SYTC:"Synchronized tempo codes",TALB:"Album/Movie/Show title",TBPM:"BPM (beats per minute)",TCOM:"Composer",TCON:"Content type",TCOP:"Copyright message",TDAT:"Date",TDLY:"Playlist delay",TDRC:"Recording time",TDRL:"Release time",TDTG:"Tagging time",TENC:"Encoded by",TEXT:"Lyricist/Text writer",TFLT:"File type",TIME:"Time",TIPL:"Involved people list",
TIT1:"Content group description",TIT2:"Title/songname/content description",TIT3:"Subtitle/Description refinement",TKEY:"Initial key",TLAN:"Language(s)",TLEN:"Length",TMCL:"Musician credits list",TMED:"Media type",TMOO:"Mood",TOAL:"Original album/movie/show title",TOFN:"Original filename",TOLY:"Original lyricist(s)/text writer(s)",TOPE:"Original artist(s)/performer(s)",TORY:"Original release year",TOWN:"File owner/licensee",TPE1:"Lead performer(s)/Soloist(s)",TPE2:"Band/orchestra/accompaniment",TPE3:"Conductor/performer refinement",
TPE4:"Interpreted, remixed, or otherwise modified by",TPOS:"Part of a set",TPRO:"Produced notice",TPUB:"Publisher",TRCK:"Track number/Position in set",TRDA:"Recording dates",TRSN:"Internet radio station name",TRSO:"Internet radio station owner",TSOA:"Album sort order",TSOP:"Performer sort order",TSOT:"Title sort order",TSIZ:"Size",TSRC:"ISRC (international standard recording code)",TSSE:"Software/Hardware and settings used for encoding",TSST:"Set subtitle",TYER:"Year",TXXX:"User defined text information frame",
UFID:"Unique file identifier",USER:"Terms of use",USLT:"Unsychronized lyric/text transcription",WCOM:"Commercial information",WCOP:"Copyright/Legal information",WOAF:"Official audio file webpage",WOAR:"Official artist/performer webpage",WOAS:"Official audio source webpage",WORS:"Official internet radio station homepage",WPAY:"Payment",WPUB:"Publishers official webpage",WXXX:"User defined URL link frame"};c=function(){function h(){if(!(this instanceof h))throw new TypeError("Cannot call a class as a function");
}u(h,null,[{key:"getFrameReaderFunction",value:function(d){return d in l?l[d]:"T"===d[0]?l["T*"]:"W"===d[0]?l["W*"]:null}},{key:"readFrames",value:function(d,a,e,m,g){for(var b={},f=this._getFrameHeaderSize(m);d<a-f;){var c=this._readFrameHeader(e,d,m),k=c.id;if(!k)break;var l=c.flags,t=c.size,p=d+c.headerSize,n=e;d+=c.headerSize+c.size;if(!g||-1!==g.indexOf(k)){if("MP3e"===k||"\x00MP3"===k||"\x00\x00MP"===k||" MP3"===k)break;l&&l.format.unsynchronisation&&!m.flags.unsynchronisation&&(n=this.getUnsyncFileReader(n,
p,t),p=0,t=n.getSize());l&&l.format.data_length_indicator&&(p+=4,t-=4);l=(c=h.getFrameReaderFunction(k))?c.apply(this,[p,t,n,l,m]):null;p=this._getFrameDescription(k);t={id:k,size:t,description:p,data:l};k in b?(b[k].id&&(b[k]=[b[k]]),b[k].push(t)):b[k]=t}}return b}},{key:"_getFrameHeaderSize",value:function(d){d=d.major;return 2==d?6:3==d||4==d?10:0}},{key:"_readFrameHeader",value:function(d,a,e){var b=e.major,g=null;e=this._getFrameHeaderSize(e);switch(b){case 2:var h=d.getStringAt(a,3);var f=d.getInteger24At(a+
3,!0);break;case 3:h=d.getStringAt(a,4);f=d.getLongAt(a+4,!0);break;case 4:h=d.getStringAt(a,4),f=d.getSynchsafeInteger32At(a+4)}if(h==String.fromCharCode(0,0,0)||h==String.fromCharCode(0,0,0,0))h="";h&&2<b&&(g=this._readFrameFlags(d,a+8));return{id:h||"",size:f||0,headerSize:e||0,flags:g}}},{key:"_readFrameFlags",value:function(d,a){return{message:{tag_alter_preservation:d.isBitSetAt(a,6),file_alter_preservation:d.isBitSetAt(a,5),read_only:d.isBitSetAt(a,4)},format:{grouping_identity:d.isBitSetAt(a+
1,7),compression:d.isBitSetAt(a+1,3),encryption:d.isBitSetAt(a+1,2),unsynchronisation:d.isBitSetAt(a+1,1),data_length_indicator:d.isBitSetAt(a+1,0)}}}},{key:"_getFrameDescription",value:function(d){return d in k?k[d]:"Unknown"}},{key:"getUnsyncFileReader",value:function(d,a,e){d=d.getBytesAt(a,e);for(a=0;a<d.length-1;a++)255===d[a]&&0===d[a+1]&&d.splice(a+1,1);return new b(d)}}]);return h}();var l={APIC:function(h,d,a,e,b){e=h;var g=v(a.getByteAt(h));switch(b&&b.major){case 2:b=a.getStringAt(h+1,
3);h+=4;break;case 3:case 4:b=a.getStringWithCharsetAt(h+1,d-1);h+=1+b.bytesReadCount;break;default:throw Error("Couldn't read ID3v2 major version.");}var m=a.getByteAt(h);m=t[m];g=a.getStringWithCharsetAt(h+1,d-(h-e)-1,g);h+=1+g.bytesReadCount;return{format:b.toString(),type:m,description:g.toString(),data:a.getBytesAt(h,e+d-h)}},CHAP:function(b,d,a,e,m){e=b;var g={},h=f.readNullTerminatedString(a.getBytesAt(b,d));g.id=h.toString();b+=h.bytesReadCount;g.startTime=a.getLongAt(b,!0);b+=4;g.endTime=
a.getLongAt(b,!0);b+=4;g.startOffset=a.getLongAt(b,!0);b+=4;g.endOffset=a.getLongAt(b,!0);b+=4;g.subFrames=this.readFrames(b,b+(d-(b-e)),a,m);return g},CTOC:function(b,d,a,e,m){e=b;var g={childElementIds:[],id:void 0,topLevel:void 0,ordered:void 0,entryCount:void 0,subFrames:void 0},h=f.readNullTerminatedString(a.getBytesAt(b,d));g.id=h.toString();b+=h.bytesReadCount;g.topLevel=a.isBitSetAt(b,1);g.ordered=a.isBitSetAt(b,0);b++;g.entryCount=a.getByteAt(b);b++;for(h=0;h<g.entryCount;h++){var c=f.readNullTerminatedString(a.getBytesAt(b,
d-(b-e)));g.childElementIds.push(c.toString());b+=c.bytesReadCount}g.subFrames=this.readFrames(b,b+(d-(b-e)),a,m);return g},COMM:function(b,d,a,e,m){var g=b,h=v(a.getByteAt(b));e=a.getStringAt(b+1,3);m=a.getStringWithCharsetAt(b+4,d-4,h);b+=4+m.bytesReadCount;b=a.getStringWithCharsetAt(b,g+d-b,h);return{language:e,short_description:m.toString(),text:b.toString()}}};l.COM=l.COMM;l.PIC=function(b,d,a,e,m){return l.APIC(b,d,a,e,m)};l.PCNT=function(b,d,a,e,m){return a.getLongAt(b,!1)};l.CNT=l.PCNT;l.SYLT=
function(b,d,a,e,m){e=b;m=v(a.getByteAt(b));b+=1;var g=a.getStringAt(b,3);b+=3;var f=["unset","frames","milliseconds"][a.getByteAt(b)];b+=1;var h="other lyrics transcription movement events chord trivia".split(" ")[a.getByteAt(b)];b+=1;var c=a.getStringWithCharsetAt(b,d+e-b,m);b+=c.bytesReadCount;for(var k=[],l;b<d+e;)l=a.getStringWithCharsetAt(b,d+e-b,m),b+=l.bytesReadCount,k.push({text:l.toString(),timeStamp:a.getSynchsafeInteger32At(b)}),b+=4;return{language:g,timeStampFormat:f,contentType:h,descriptor:c.toString(),
synchronisedText:k}};l["T*"]=function(b,d,a,e,m){e=v(a.getByteAt(b));return a.getStringWithCharsetAt(b+1,d-1,e).toString()};l.TXXX=function(b,d,a,e,m){e=v(a.getByteAt(b));return p(b,d,a,e)};l.WXXX=function(b,d,a,e,m){if(0===d)return null;e=v(a.getByteAt(b));return p(b,d,a,e)};l["W*"]=function(b,d,a,e,m){return 0===d?null:a.getStringWithCharsetAt(b,d,"iso-8859-1").toString()};l.TCON=function(b,d,a,e){return l["T*"].apply(this,arguments).replace(/^\(\d+\)/,"")};l.TCO=l.TCON;l.USLT=function(b,d,a,e,
m){var g=b,f=v(a.getByteAt(b));e=a.getStringAt(b+1,3);m=a.getStringWithCharsetAt(b+4,d-4,f);b+=4+m.bytesReadCount;b=a.getStringWithCharsetAt(b,g+d-b,f);return{language:e,descriptor:m.toString(),lyrics:b.toString()}};l.ULT=l.USLT;l.UFID=function(b,d,a,e,m){e=f.readNullTerminatedString(a.getBytesAt(b,d));b+=e.bytesReadCount;b=a.getBytesAt(b,d-e.bytesReadCount);return{ownerIdentifier:e.toString(),identifier:b}};var t="Other;32x32 pixels 'file icon' (PNG only);Other file icon;Cover (front);Cover (back);Leaflet page;Media (e.g. label side of CD);Lead artist/lead performer/soloist;Artist/performer;Conductor;Band/Orchestra;Composer;Lyricist/text writer;Recording Location;During recording;During performance;Movie/video screen capture;A bright coloured fish;Illustration;Band/artist logotype;Publisher/Studio logotype".split(";");
r.exports=c},{"./ArrayFileReader":3,"./MediaFileReader":11,"./StringUtils":13}],9:[function(c,r,q){function n(b){"@babel/helpers - typeof";n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};return n(b)}function u(b,a){for(var e=0;e<a.length;e++){var d=a[e];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(b,
d.key,d)}}function v(b,a,e){a&&u(b.prototype,a);e&&u(b,e);return b}function p(b,a){if("function"!==typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function");b.prototype=Object.create(a&&a.prototype,{constructor:{value:b,writable:!0,configurable:!0}});a&&f(b,a)}function f(b,a){f=Object.setPrototypeOf||function(a,b){a.__proto__=b;return a};return f(b,a)}function b(b){var a=k();return function(){var e=l(b);if(a){var d=l(this).constructor;e=Reflect.construct(e,arguments,
d)}else e=e.apply(this,arguments);if(!e||"object"!==n(e)&&"function"!==typeof e){if(void 0===this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");e=this}return e}}function k(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(d){return!1}}function l(b){l=Object.setPrototypeOf?Object.getPrototypeOf:
function(a){return a.__proto__||Object.getPrototypeOf(a)};return l(b)}q=c("./MediaTagReader");c("./MediaFileReader");var t=c("./ID3v2FrameReader");c=function(d){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");return e.apply(this,arguments)}p(a,d);var e=b(a);v(a,[{key:"_loadData",value:function(a,b){a.loadRange([6,9],{onSuccess:function(){a.loadRange([0,10+a.getSynchsafeInteger32At(6)-1],b)},onError:b.onError})}},{key:"_parseData",value:function(a,b){var e,
g=0,d=a.getByteAt(g+3);if(4<d)return{type:"ID3",version:">2.4",tags:{}};var f=a.getByteAt(g+4),c=a.isBitSetAt(g+5,7),m=a.isBitSetAt(g+5,6),k=a.isBitSetAt(g+5,5),l=a.getSynchsafeInteger32At(g+6);g+=10;if(m)if(4===d){var p=a.getSynchsafeInteger32At(g);g+=p}else p=a.getLongAt(g,!0),g+=p+4;p={type:"ID3",version:"2."+d+"."+f,major:d,revision:f,flags:{unsynchronisation:c,extended_header:m,experimental_indicator:k,footer_present:!1},size:l,tags:{}};b&&(e=this._expandShortcutTags(b));b=l+10;p.flags.unsynchronisation&&
(a=t.getUnsyncFileReader(a,g,l),g=0,b=a.getSize());a=t.readFrames(g,b,a,p,e);for(var n in h)h.hasOwnProperty(n)&&(e=this._getFrameData(a,h[n]))&&(p.tags[n]=e);for(var q in a)a.hasOwnProperty(q)&&(p.tags[q]=a[q]);return p}},{key:"_getFrameData",value:function(a,b){for(var e=0,g;g=b[e];e++)if(g in a)return a=a[g]instanceof Array?a[g][0]:a[g],a.data}},{key:"getShortcuts",value:function(){return h}}],[{key:"getTagIdentifierByteRange",value:function(){return{offset:0,length:10}}},{key:"canReadTagFormat",
value:function(a){return"ID3"===String.fromCharCode.apply(String,a.slice(0,3))}}]);return a}(q);var h={title:["TIT2","TT2"],artist:["TPE1","TP1"],album:["TALB","TAL"],year:["TYER","TYE"],comment:["COMM","COM"],track:["TRCK","TRK"],genre:["TCON","TCO"],picture:["APIC","PIC"],lyrics:["USLT","ULT"]};r.exports=c},{"./ID3v2FrameReader":8,"./MediaFileReader":11,"./MediaTagReader":12}],10:[function(c,r,q){function n(a){"@babel/helpers - typeof";n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?
function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};return n(a)}function u(a,b){for(var e=0;e<b.length;e++){var g=b[e];g.enumerable=g.enumerable||!1;g.configurable=!0;"value"in g&&(g.writable=!0);Object.defineProperty(a,g.key,g)}}function v(a,b,d){b&&u(a.prototype,b);d&&u(a,d);return a}function p(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");
a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}});b&&f(a,b)}function f(a,b){f=Object.setPrototypeOf||function(a,b){a.__proto__=b;return a};return f(a,b)}function b(a){var b=k();return function(){var e=l(a);if(b){var g=l(this).constructor;e=Reflect.construct(e,arguments,g)}else e=e.apply(this,arguments);if(!e||"object"!==n(e)&&"function"!==typeof e){if(void 0===this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");e=this}return e}}
function k(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}function l(a){l=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)};return l(a)}q=c("./MediaTagReader");c("./MediaFileReader");c=function(a){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");
return f.apply(this,arguments)}p(e,a);var f=b(e);v(e,[{key:"_loadData",value:function(a,b){var e=this;a.loadRange([0,16],{onSuccess:function(){e._loadAtom(a,0,"",b)},onError:b.onError})}},{key:"_loadAtom",value:function(a,b,e,d){if(b>=a.getSize())d.onSuccess();else{var g=this,f=a.getLongAt(b,!0);if(0==f||isNaN(f))d.onSuccess();else{var c=a.getStringAt(b+4,4);if(this._isContainerAtom(c)){"meta"==c&&(b+=4);var k=(e?e+".":"")+c;"moov.udta.meta.ilst"===k?a.loadRange([b,b+f],d):a.loadRange([b+8,b+8+8],
{onSuccess:function(){g._loadAtom(a,b+8,k,d)},onError:d.onError})}else a.loadRange([b+f,b+f+8],{onSuccess:function(){g._loadAtom(a,b+f,e,d)},onError:d.onError})}}}},{key:"_isContainerAtom",value:function(a){return 0<=["moov","udta","meta","ilst"].indexOf(a)}},{key:"_canReadAtom",value:function(a){return"----"!==a}},{key:"_parseData",value:function(a,b){var e={};b=this._expandShortcutTags(b);this._readAtom(e,a,0,a.getSize(),b);for(var g in d)d.hasOwnProperty(g)&&(b=e[d[g]])&&(e[g]="track"===g?b.data.track:
b.data);return{type:"MP4",ftyp:a.getStringAt(8,4),version:a.getLongAt(12,!0),tags:e}}},{key:"_readAtom",value:function(a,b,e,d,f,c,k){k=void 0===k?"":k+"  ";for(var g=e;g<e+d;){var l=b.getLongAt(g,!0);if(0==l)break;var h=b.getStringAt(g+4,4);if(this._isContainerAtom(h)){"meta"==h&&(g+=4);this._readAtom(a,b,g+8,l-8,f,(c?c+".":"")+h,k);break}(!f||0<=f.indexOf(h))&&"moov.udta.meta.ilst"===c&&this._canReadAtom(h)&&(a[h]=this._readMetadataAtom(b,g));g+=l}}},{key:"_readMetadataAtom",value:function(a,b){var e=
a.getLongAt(b,!0),d=a.getStringAt(b+4,4),g=a.getInteger24At(b+16+1,!0);g=t[g];if("trkn"==d)var f={track:a.getShortAt(b+16+10,!0),total:a.getShortAt(b+16+14,!0)};else if("disk"==d)f={disk:a.getShortAt(b+16+10,!0),total:a.getShortAt(b+16+14,!0)};else{b+=24;var c=e-24;"covr"===d&&"uint8"===g&&(g="jpeg");switch(g){case "text":f=a.getStringWithCharsetAt(b,c,"utf-8").toString();break;case "uint8":f=a.getShortAt(b,!1);break;case "int":case "uint":f=("int"==g?1==c?a.getSByteAt:2==c?a.getSShortAt:4==c?a.getSLongAt:
a.getLongAt:1==c?a.getByteAt:2==c?a.getShortAt:a.getLongAt).call(a,b+(8==c?4:0),!0);break;case "jpeg":case "png":f={format:"image/"+g,data:a.getBytesAt(b,c)}}}return{id:d,size:e,description:h[d]||"Unknown",data:f}}},{key:"getShortcuts",value:function(){return d}}],[{key:"getTagIdentifierByteRange",value:function(){return{offset:0,length:16}}},{key:"canReadTagFormat",value:function(a){return"ftyp"===String.fromCharCode.apply(String,a.slice(4,8))}}]);return e}(q);var t={0:"uint8",1:"text",13:"jpeg",
14:"png",21:"int",22:"uint"},h={"\u00a9alb":"Album","\u00a9ART":"Artist",aART:"Album Artist","\u00a9day":"Release Date","\u00a9nam":"Title","\u00a9gen":"Genre",gnre:"Genre",trkn:"Track Number","\u00a9wrt":"Composer","\u00a9too":"Encoding Tool","\u00a9enc":"Encoded By",cprt:"Copyright",covr:"Cover Art","\u00a9grp":"Grouping",keyw:"Keywords","\u00a9lyr":"Lyrics","\u00a9cmt":"Comment",tmpo:"Tempo",cpil:"Compilation",disk:"Disc Number",tvsh:"TV Show Name",tven:"TV Episode ID",tvsn:"TV Season",tves:"TV Episode",
tvnn:"TV Network",desc:"Description",ldes:"Long Description",sonm:"Sort Name",soar:"Sort Artist",soaa:"Sort Album",soco:"Sort Composer",sosn:"Sort Show",purd:"Purchase Date",pcst:"Podcast",purl:"Podcast URL",catg:"Category",hdvd:"HD Video",stik:"Media Type",rtng:"Content Rating",pgap:"Gapless Playback",apID:"Purchase Account",sfID:"Country Code",atID:"Artist ID",cnID:"Catalog ID",plID:"Collection ID",geID:"Genre ID","xid ":"Vendor Information",flvr:"Codec Flavor"},d={title:"\u00a9nam",artist:"\u00a9ART",
album:"\u00a9alb",year:"\u00a9day",comment:"\u00a9cmt",track:"trkn",genre:"\u00a9gen",picture:"covr",lyrics:"\u00a9lyr"};r.exports=c},{"./MediaFileReader":11,"./MediaTagReader":12}],11:[function(c,r,q){function n(f,b){for(var c=0;c<b.length;c++){var l=b[c];l.enumerable=l.enumerable||!1;l.configurable=!0;"value"in l&&(l.writable=!0);Object.defineProperty(f,l.key,l)}}function u(f,b,c){b&&n(f.prototype,b);c&&n(f,c);return f}function v(f,b,c){b in f?Object.defineProperty(f,b,{value:c,enumerable:!0,configurable:!0,
writable:!0}):f[b]=c;return f}var p=c("./StringUtils");c=function(){function f(b){if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");v(this,"_isInitialized",void 0);v(this,"_size",void 0);this._isInitialized=!1;this._size=0}u(f,[{key:"init",value:function(b){var f=this;if(this._isInitialized)setTimeout(b.onSuccess,1);else return this._init({onSuccess:function(){f._isInitialized=!0;b.onSuccess()},onError:b.onError})}},{key:"_init",value:function(b){throw Error("Must implement init function");
}},{key:"loadRange",value:function(b,f){throw Error("Must implement loadRange function");}},{key:"getSize",value:function(){if(!this._isInitialized)throw Error("init() must be called first.");return this._size}},{key:"getByteAt",value:function(b){throw Error("Must implement getByteAt function");}},{key:"getBytesAt",value:function(b,f){for(var c=Array(f),k=0;k<f;k++)c[k]=this.getByteAt(b+k);return c}},{key:"isBitSetAt",value:function(b,f){return 0!=(this.getByteAt(b)&1<<f)}},{key:"getSByteAt",value:function(b){b=
this.getByteAt(b);return 127<b?b-256:b}},{key:"getShortAt",value:function(b,f){b=f?(this.getByteAt(b)<<8)+this.getByteAt(b+1):(this.getByteAt(b+1)<<8)+this.getByteAt(b);0>b&&(b+=65536);return b}},{key:"getSShortAt",value:function(b,f){b=this.getShortAt(b,f);return 32767<b?b-65536:b}},{key:"getLongAt",value:function(b,f){var c=this.getByteAt(b),k=this.getByteAt(b+1),h=this.getByteAt(b+2);b=this.getByteAt(b+3);f=f?(((c<<8)+k<<8)+h<<8)+b:(((b<<8)+h<<8)+k<<8)+c;0>f&&(f+=4294967296);return f}},{key:"getSLongAt",
value:function(b,f){b=this.getLongAt(b,f);return 2147483647<b?b-4294967296:b}},{key:"getInteger24At",value:function(b,f){var c=this.getByteAt(b),k=this.getByteAt(b+1);b=this.getByteAt(b+2);f=f?((c<<8)+k<<8)+b:((b<<8)+k<<8)+c;0>f&&(f+=16777216);return f}},{key:"getStringAt",value:function(b,f){for(var c=[],k=b,h=0;k<b+f;k++,h++)c[h]=String.fromCharCode(this.getByteAt(k));return c.join("")}},{key:"getStringWithCharsetAt",value:function(b,f,c){b=this.getBytesAt(b,f);switch((c||"").toLowerCase()){case "utf-16":case "utf-16le":case "utf-16be":c=
p.readUTF16String(b,"utf-16be"===c);break;case "utf-8":c=p.readUTF8String(b);break;default:c=p.readNullTerminatedString(b)}return c}},{key:"getCharAt",value:function(b){return String.fromCharCode(this.getByteAt(b))}},{key:"getSynchsafeInteger32At",value:function(b){var f=this.getByteAt(b),c=this.getByteAt(b+1),p=this.getByteAt(b+2);return this.getByteAt(b+3)&127|(p&127)<<7|(c&127)<<14|(f&127)<<21}}],[{key:"canReadFile",value:function(b){throw Error("Must implement canReadFile function");}}]);return f}();
r.exports=c},{"./StringUtils":13}],12:[function(c,r,q){function n(c,f){for(var b=0;b<f.length;b++){var k=f[b];k.enumerable=k.enumerable||!1;k.configurable=!0;"value"in k&&(k.writable=!0);Object.defineProperty(c,k.key,k)}}function u(c,f,b){f&&n(c.prototype,f);b&&n(c,b);return c}function v(c,f,b){f in c?Object.defineProperty(c,f,{value:b,enumerable:!0,configurable:!0,writable:!0}):c[f]=b;return c}c("./MediaFileReader");c=function(){function c(f){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");
v(this,"_mediaFileReader",void 0);v(this,"_tags",void 0);this._mediaFileReader=f;this._tags=null}u(c,[{key:"setTagsToRead",value:function(f){this._tags=f;return this}},{key:"read",value:function(f){var b=this;this._mediaFileReader.init({onSuccess:function(){b._loadData(b._mediaFileReader,{onSuccess:function(){try{var c=b._parseData(b._mediaFileReader,b._tags)}catch(l){if(f.onError){f.onError({type:"parseData",info:l.message});return}}f.onSuccess(c)},onError:f.onError})},onError:f.onError})}},{key:"getShortcuts",
value:function(){return{}}},{key:"_loadData",value:function(c,b){throw Error("Must implement _loadData function");}},{key:"_parseData",value:function(c,b){throw Error("Must implement _parseData function");}},{key:"_expandShortcutTags",value:function(c){if(!c)return null;for(var b=[],f=this.getShortcuts(),l=0,n;n=c[l];l++)b=b.concat(f[n]||[n]);return b}}],[{key:"getTagIdentifierByteRange",value:function(){throw Error("Must implement");}},{key:"canReadTagFormat",value:function(c){throw Error("Must implement");
}}]);return c}();r.exports=c},{"./MediaFileReader":11}],13:[function(c,r,q){function n(c,b){for(var f=0;f<b.length;f++){var l=b[f];l.enumerable=l.enumerable||!1;l.configurable=!0;"value"in l&&(l.writable=!0);Object.defineProperty(c,l.key,l)}}function u(c,b,k){b&&n(c.prototype,b);k&&n(c,k);return c}function v(c,b,k){b in c?Object.defineProperty(c,b,{value:k,enumerable:!0,configurable:!0,writable:!0}):c[b]=k;return c}var p=function(){function c(b,f){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");
v(this,"_value",void 0);v(this,"bytesReadCount",void 0);v(this,"length",void 0);this._value=b;this.bytesReadCount=f;this.length=b.length}u(c,[{key:"toString",value:function(){return this._value}}]);return c}();r.exports={readUTF16String:function(c,b,k){var f=0,n=1,h=0;k=Math.min(k||c.length,c.length);254==c[0]&&255==c[1]?(b=!0,f=2):255==c[0]&&254==c[1]&&(b=!1,f=2);b&&(n=0,h=1);b=[];for(var d=0;f<k;d++){var a=c[f+n],e=(a<<8)+c[f+h];f+=2;if(0==e)break;else 216>a||224<=a?b[d]=String.fromCharCode(e):
(a=(c[f+n]<<8)+c[f+h],f+=2,b[d]=String.fromCharCode(e,a))}return new p(b.join(""),f)},readUTF8String:function(c,b){var f=0;b=Math.min(b||c.length,c.length);239==c[0]&&187==c[1]&&191==c[2]&&(f=3);for(var l=[],n=0;f<b;n++){var h=c[f++];if(0==h)break;else if(128>h)l[n]=String.fromCharCode(h);else if(194<=h&&224>h){var d=c[f++];l[n]=String.fromCharCode(((h&31)<<6)+(d&63))}else if(224<=h&&240>h){d=c[f++];var a=c[f++];l[n]=String.fromCharCode(((h&255)<<12)+((d&63)<<6)+(a&63))}else if(240<=h&&245>h){d=c[f++];
a=c[f++];var e=c[f++];a=((h&7)<<18)+((d&63)<<12)+((a&63)<<6)+(e&63)-65536;l[n]=String.fromCharCode((a>>10)+55296,(a&1023)+56320)}}return new p(l.join(""),f)},readNullTerminatedString:function(c,b){var f=[];b=b||c.length;for(var l=0;l<b;){var n=c[l++];if(0==n)break;f[l-1]=String.fromCharCode(n)}return new p(f.join(""),l)}}},{}],14:[function(c,r,q){function n(a){"@babel/helpers - typeof";n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&
"function"===typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};return n(a)}function u(a,b){for(var e=0;e<b.length;e++){var c=b[e];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(a,c.key,c)}}function v(a,b,c){b&&u(a.prototype,b);c&&u(a,c);return a}function p(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,
writable:!0,configurable:!0}});b&&f(a,b)}function f(a,b){f=Object.setPrototypeOf||function(a,b){a.__proto__=b;return a};return f(a,b)}function b(a){var b=l();return function(){var c=t(a);if(b){var e=t(this).constructor;c=Reflect.construct(c,arguments,e)}else c=c.apply(this,arguments);c=!c||"object"!==n(c)&&"function"!==typeof c?k(this):c;return c}}function k(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function l(){if("undefined"===
typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}function t(a){t=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)};return t(a)}function h(a,b,c){b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c;return a}var d=c("./ChunkedFileData");q=function(a){function e(a){if(!(this instanceof
e))throw new TypeError("Cannot call a class as a function");var b=f.call(this);h(k(b),"_url",void 0);h(k(b),"_fileData",void 0);b._url=a;b._fileData=new d;return b}p(e,a);var f=b(e);v(e,[{key:"_init",value:function(a){e._config.avoidHeadRequests?this._fetchSizeWithGetRequest(a):this._fetchSizeWithHeadRequest(a)}},{key:"_fetchSizeWithHeadRequest",value:function(a){var b=this;this._makeXHRRequest("HEAD",null,{onSuccess:function(c){(c=b._parseContentLength(c))?(b._size=c,a.onSuccess()):b._fetchSizeWithGetRequest(a)},
onError:a.onError})}},{key:"_fetchSizeWithGetRequest",value:function(a){var b=this,c=this._roundRangeToChunkMultiple([0,0]);this._makeXHRRequest("GET",c,{onSuccess:function(c){var e=b._parseContentRange(c);c=b._getXhrResponseContent(c);if(e){if(null==e.instanceLength){b._fetchEntireFile(a);return}b._size=e.instanceLength}else b._size=c.length;b._fileData.addData(0,c);a.onSuccess()},onError:a.onError})}},{key:"_fetchEntireFile",value:function(a){var b=this;this._makeXHRRequest("GET",null,{onSuccess:function(c){c=
b._getXhrResponseContent(c);b._size=c.length;b._fileData.addData(0,c);a.onSuccess()},onError:a.onError})}},{key:"_getXhrResponseContent",value:function(a){return a.responseBody||a.responseText||""}},{key:"_parseContentLength",value:function(a){a=this._getResponseHeader(a,"Content-Length");return null==a?a:parseInt(a,10)}},{key:"_parseContentRange",value:function(a){if(a=this._getResponseHeader(a,"Content-Range")){var b=a.match(/bytes (\d+)-(\d+)\/(?:(\d+)|\*)/i);if(!b)throw Error("FIXME: Unknown Content-Range syntax: "+
a);return{firstBytePosition:parseInt(b[1],10),lastBytePosition:parseInt(b[2],10),instanceLength:b[3]?parseInt(b[3],10):null}}return null}},{key:"loadRange",value:function(a,b){var c=this;c._fileData.hasDataRange(a[0],Math.min(c._size,a[1]))?setTimeout(b.onSuccess,1):(a=this._roundRangeToChunkMultiple(a),a[1]=Math.min(c._size,a[1]),this._makeXHRRequest("GET",a,{onSuccess:function(e){e=c._getXhrResponseContent(e);c._fileData.addData(a[0],e);b.onSuccess()},onError:b.onError}))}},{key:"_roundRangeToChunkMultiple",
value:function(a){return[a[0],a[0]+1024*Math.ceil((a[1]-a[0]+1)/1024)-1]}},{key:"_makeXHRRequest",value:function(a,b,c){var d=this._createXHRObject();d.open(a,this._url);var f=function(){if(200===d.status||206===d.status)c.onSuccess(d);else if(c.onError)c.onError({type:"xhr",info:"Unexpected HTTP status "+d.status+".",xhr:d});d=null};"undefined"!==typeof d.onload?(d.onload=f,d.onerror=function(){if(c.onError)c.onError({type:"xhr",info:"Generic XHR error, check xhr object.",xhr:d})}):d.onreadystatechange=
function(){4===d.readyState&&f()};e._config.timeoutInSec&&(d.timeout=1E3*e._config.timeoutInSec,d.ontimeout=function(){if(c.onError)c.onError({type:"xhr",info:"Timeout after "+d.timeout/1E3+"s. Use jsmediatags.Config.setXhrTimeout to override.",xhr:d})});d.overrideMimeType("text/plain; charset=x-user-defined");b&&this._setRequestHeader(d,"Range","bytes="+b[0]+"-"+b[1]);this._setRequestHeader(d,"If-Modified-Since","Sat, 01 Jan 1970 00:00:00 GMT");d.send(null)}},{key:"_setRequestHeader",value:function(a,
b,c){0>e._config.disallowedXhrHeaders.indexOf(b.toLowerCase())&&a.setRequestHeader(b,c)}},{key:"_hasResponseHeader",value:function(a,b){a=a.getAllResponseHeaders();if(!a)return!1;a=a.split("\r\n");for(var c=[],d=0;d<a.length;d++)c[d]=a[d].split(":")[0].toLowerCase();return 0<=c.indexOf(b.toLowerCase())}},{key:"_getResponseHeader",value:function(a,b){return this._hasResponseHeader(a,b)?a.getResponseHeader(b):null}},{key:"getByteAt",value:function(a){return this._fileData.getByteAt(a).charCodeAt(0)&
255}},{key:"_isWebWorker",value:function(){return"undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope}},{key:"_createXHRObject",value:function(){if("undefined"===typeof window&&!this._isWebWorker())return new (c("xhr2").XMLHttpRequest);if("undefined"!==typeof XMLHttpRequest)return new XMLHttpRequest;throw Error("XMLHttpRequest is not supported");}}],[{key:"canReadFile",value:function(a){return"string"===typeof a&&/^[a-z]+:\/\//i.test(a)}},{key:"setConfig",value:function(a){for(var b in a)a.hasOwnProperty(b)&&
(this._config[b]=a[b]);a=this._config.disallowedXhrHeaders;for(b=0;b<a.length;b++)a[b]=a[b].toLowerCase()}}]);return e}(c("./MediaFileReader"));h(q,"_config",void 0);q._config={avoidHeadRequests:!1,disallowedXhrHeaders:[],timeoutInSec:30};r.exports=q},{"./ChunkedFileData":5,"./MediaFileReader":11,xhr2:2}],15:[function(c,r,q){function n(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function u(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||
!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function v(a,b,c){b&&u(a.prototype,b);c&&u(a,c);return a}function p(a,b,c){b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c;return a}function f(a,b){var c=0>a.offset&&(-a.offset>b||0<a.offset+a.length);return!(0<=a.offset&&a.offset+a.length>=b||c)}c("./MediaFileReader");var b=c("./XhrFileReader"),k=c("./BlobFileReader"),l=c("./ArrayFileReader");c("./MediaTagReader");var t=
c("./ID3v1TagReader"),h=c("./ID3v2TagReader"),d=c("./MP4TagReader"),a=c("./FLACTagReader"),e=[],m=[],g=function(){function a(b){n(this,a);p(this,"_file",void 0);p(this,"_tagsToRead",void 0);p(this,"_fileReader",void 0);p(this,"_tagReader",void 0);this._file=b}v(a,[{key:"setTagsToRead",value:function(a){this._tagsToRead=a;return this}},{key:"setFileReader",value:function(a){this._fileReader=a;return this}},{key:"setTagReader",value:function(a){this._tagReader=a;return this}},{key:"read",value:function(a){var b=
new (this._getFileReader())(this._file),c=this;b.init({onSuccess:function(){c._getTagReader(b,{onSuccess:function(d){(new d(b)).setTagsToRead(c._tagsToRead).read(a)},onError:a.onError})},onError:a.onError})}},{key:"_getFileReader",value:function(){return this._fileReader?this._fileReader:this._findFileReader()}},{key:"_findFileReader",value:function(){for(var a=0;a<e.length;a++)if(e[a].canReadFile(this._file))return e[a];throw Error("No suitable file reader found for "+this._file);}},{key:"_getTagReader",
value:function(a,b){if(this._tagReader){var c=this._tagReader;setTimeout(function(){b.onSuccess(c)},1)}else this._findTagReader(a,b)}},{key:"_findTagReader",value:function(a,b){for(var c=[],d=[],e=a.getSize(),g=0;g<m.length;g++){var h=m[g].getTagIdentifierByteRange();f(h,e)&&(0<=h.offset&&h.offset<e/2||0>h.offset&&h.offset<-e/2?c.push(m[g]):d.push(m[g]))}var k=!1;g={onSuccess:function(){if(k){for(var c=0;c<m.length;c++){var d=m[c].getTagIdentifierByteRange();if(f(d,e)){try{var g=a.getBytesAt(0<=d.offset?
d.offset:d.offset+e,d.length)}catch(z){if(b.onError)b.onError({type:"fileReader",info:z.message});return}if(m[c].canReadTagFormat(g)){b.onSuccess(m[c]);return}}}if(b.onError)b.onError({type:"tagFormat",info:"No suitable tag reader found"})}else k=!0},onError:b.onError};this._loadTagIdentifierRanges(a,c,g);this._loadTagIdentifierRanges(a,d,g)}},{key:"_loadTagIdentifierRanges",value:function(a,b,c){if(0===b.length)setTimeout(c.onSuccess,1);else{for(var d=[Number.MAX_VALUE,0],e=a.getSize(),f=0;f<b.length;f++){var g=
b[f].getTagIdentifierByteRange(),h=0<=g.offset?g.offset:g.offset+e;g=h+g.length-1;d[0]=Math.min(h,d[0]);d[1]=Math.max(g,d[1])}a.loadRange(d,c)}}}]);return a}();q=function(){function a(){n(this,a)}v(a,null,[{key:"addFileReader",value:function(b){e.push(b);return a}},{key:"addTagReader",value:function(b){m.push(b);return a}},{key:"removeTagReader",value:function(b){b=m.indexOf(b);0<=b&&m.splice(b,1);return a}},{key:"EXPERIMENTAL_avoidHeadRequests",value:function(){b.setConfig({avoidHeadRequests:!0})}},
{key:"setDisallowedXhrHeaders",value:function(a){b.setConfig({disallowedXhrHeaders:a})}},{key:"setXhrTimeoutInSec",value:function(a){b.setConfig({timeoutInSec:a})}}]);return a}();q.addFileReader(b).addFileReader(k).addFileReader(l).addTagReader(h).addTagReader(t).addTagReader(d).addTagReader(a);"undefined"===typeof process||process.browser||(c="undefined"!==typeof navigator&&"ReactNative"===navigator.product?c("./ReactNativeFileReader"):c("./NodeFileReader"),q.addFileReader(c));r.exports={read:function(a,
b){(new g(a)).read(b)},Reader:g,Config:q}},{"./ArrayFileReader":3,"./BlobFileReader":4,"./FLACTagReader":6,"./ID3v1TagReader":7,"./ID3v2TagReader":9,"./MP4TagReader":10,"./MediaFileReader":11,"./MediaTagReader":12,"./NodeFileReader":1,"./ReactNativeFileReader":1,"./XhrFileReader":14}]},{},[15])(15)});
